import streamlit as st
import google.generativeai as genai

# Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
if "GENAI_API_KEY" in st.secrets:
    genai.configure(api_key=st.secrets["GENAI_API_KEY"])
    model = genai.GenerativeModel('gemini-1.5-flash')

# --- Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ---
if "logged_in" not in st.session_state:
    st.session_state.logged_in = False

if not st.session_state.logged_in:
    st.title("ğŸ” Ø¯Ø®ÙˆÙ„ Ù…Ù†ØµØ© Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª")
    user_id = st.text_input("ID Ø§Ù„Ø·Ø§Ù„Ø¨")
    password = st.text_input("ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±", type="password")
    if st.button("ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"):
        if user_id == "student1" and password == "12345": # ØªÙ‚Ø¯Ø± ØªØºÙŠØ±Ù‡Ù… Ù…Ù† Ù‡Ù†Ø§
            st.session_state.logged_in = True
            st.rerun()
        else:
            st.error("Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙ„Ø· ÙŠØ§ Ø¨Ø·Ù„!")
else:
    # --- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ù†ØµØ© Ø¨Ø¹Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„ ---
    st.sidebar.title("ğŸ“š Ø¯Ø±ÙˆØ³ Ø§Ù„ÙƒÙˆØ±Ø³")
    choice = st.sidebar.radio("Ø§Ø®ØªØ± Ø§Ù„Ø¯Ø±Ø³:", ["Ù…Ù‚Ø¯Ù…Ø©", "Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø£ÙˆÙ„", "Ø§Ø³Ø£Ù„ Ù…Ø³Ø§Ø¹Ø¯ AI"])

    if choice == "Ù…Ù‚Ø¯Ù…Ø©":
        st.title("Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„ÙƒÙˆØ±Ø³")
        st.write("Ù‡Ù†Ø§ ØªØ¶Ø¹ Ù…Ù‚Ø¯Ù…Ø© Ø¹Ù† Ø§Ù„ÙƒÙˆØ±Ø³ ÙˆÙ…Ø­ØªÙˆÙŠØ§ØªÙ‡.")
    
    elif choice == "Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø£ÙˆÙ„":
        st.title("Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø£ÙˆÙ„: Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©")
        st.video("https://www.youtube.com/watch?v=dQw4w9WgXcQ") # Ø­Ø· Ù„ÙŠÙ†Ùƒ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§ØªÙƒ Ù‡Ù†Ø§
        st.write("ÙˆØµÙ Ù„Ù„Ø¯Ø±Ø³ ÙˆÙ…Ø±ÙÙ‚Ø§Øª Ø§Ù„ØªØ­Ù…ÙŠÙ„.")

    elif choice == "Ø§Ø³Ø£Ù„ Ù…Ø³Ø§Ø¹Ø¯ AI":
        st.title("ğŸ¤– Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ")
        user_q = st.chat_input("Ø§Ø³Ø£Ù„ Ø£ÙŠ Ø³Ø¤Ø§Ù„ Ø¹Ù† Ø§Ù„Ø¯Ø±Ø³...")
        if user_q:
            response = model.generate_content(user_q)
            st.chat_message("assistant").write(response.text)